import{as as m,u as h,j as e,B as t,l as c}from"./index-BgzuCSKe.js";import{A as d}from"./arrow-left-DshFC9i0.js";import{E as u}from"./external-link-c6h32n81.js";function j(){var i;const x=m(),l=h(),s=(i=x.state)==null?void 0:i.book;if(!s)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Book not found"}),e.jsxs(t,{onClick:()=>l("/library"),children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Back to Library"]})]})});const a=s.previewLink?s.previewLink.replace("http:","https:"):void 0;let o;if(s.source==="google"&&a)try{const r=new URL(a).searchParams.get("id");r&&(o=`https://books.google.com/books?id=${r}&printsec=frontcover&output=embed`)}catch{}return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-border bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs(t,{variant:"ghost",onClick:()=>l("/library"),className:"mb-4",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Back to Library"]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.title}),s.authors&&s.authors.length>0&&e.jsxs("p",{className:"text-lg text-muted-foreground",children:["by ",s.authors.join(", ")]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-[300px,1fr] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[s.thumbnail&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full max-w-[250px] rounded-lg shadow-xl"})}),e.jsxs("div",{className:"space-y-4",children:[s.publisher&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-1",children:"Publisher"}),e.jsx("p",{className:"text-base",children:s.publisher})]}),s.publishedDate&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-1",children:"Published"}),e.jsx("p",{className:"text-base",children:s.publishedDate})]}),s.pageCount&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-1",children:"Pages"}),e.jsx("p",{className:"text-base",children:s.pageCount})]}),s.language&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-1",children:"Language"}),e.jsx("p",{className:"text-base",children:s.language.toUpperCase()})]}),s.categories&&s.categories.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Categories"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:s.categories.map((n,r)=>e.jsx(c,{variant:"secondary",children:n},r))})]}),e.jsxs(c,{variant:"outline",className:"text-xs",children:["Source: ",s.source==="google"?"Google Books":"Open Library"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[s.description&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About this book"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]}),a&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Book Preview"}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]})]}),e.jsx("div",{className:"w-full h-[800px] border-2 border-border rounded-lg overflow-hidden bg-background",children:e.jsx("iframe",{src:o??a,className:"w-full h-full",title:`Preview of ${s.title}`,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:s.source==="google"?"Preview powered by Google Books":'If the preview does not load, click "Open in New Tab" above'})]})]})]})})]})}export{j as default};
