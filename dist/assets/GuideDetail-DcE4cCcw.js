import{as as T,u as D,r as d,j as e,B as r,l as x,m as v,M as w,Y as E,d as P}from"./index-BgzuCSKe.js";import{A as h}from"./arrow-left-DshFC9i0.js";import{Y as _}from"./youtube-ag8kwuy5.js";import{E as L}from"./eye-AaGJ7QJb.js";import{E as i}from"./external-link-c6h32n81.js";function H(){var p,N;const u=T(),o=D(),a=(p=u.state)==null?void 0:p.video,s=(N=u.state)==null?void 0:N.article,[m,y]=d.useState(""),[n,j]=d.useState(!1),[c,f]=d.useState(null);if(d.useEffect(()=>{(async()=>{if(s)try{j(!0),f(null);const t=await P("/guides/article",{method:"POST",body:JSON.stringify({id:s.id})});t!=null&&t.body_html&&y(t.body_html)}catch(t){console.error("Error loading Dev.to article:",t),f("Unable to load article preview. Please open it on Dev.to.")}finally{j(!1)}})()},[s==null?void 0:s.id]),!a&&!s)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Guide not found"}),e.jsxs(r,{onClick:()=>o("/guides"),children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Back to Guides"]})]})});const k=l=>{const t=l.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!t)return"";const g=(t[1]||"").replace("H",""),C=(t[2]||"").replace("M",""),S=(t[3]||"").replace("S","");return`${g?g+":":""}${C||"0"}:${S.padStart(2,"0")}`},A=l=>{const t=parseInt(l);return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:l},b=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return a?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-border bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs(r,{variant:"ghost",onClick:()=>o("/guides"),className:"mb-4",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Back to Guides"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:"h-6 w-6 text-red-500"}),e.jsx(x,{variant:"secondary",children:"Video Tutorial"})]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a.title}),e.jsxs("p",{className:"text-lg text-muted-foreground",children:["by ",a.channelTitle]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-[300px,1fr] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-full rounded-lg shadow-xl"})}),e.jsxs("div",{className:"space-y-4",children:[a.duration&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground mb-1 flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Duration"]}),e.jsx("p",{className:"text-base",children:k(a.duration)})]}),a.viewCount&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground mb-1 flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Views"]}),e.jsx("p",{className:"text-base",children:A(a.viewCount)})]}),a.publishedAt&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground mb-1 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Published"]}),e.jsx("p",{className:"text-base",children:b(a.publishedAt)})]}),e.jsxs(r,{className:"w-full",onClick:()=>window.open(a.url,"_blank"),children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Watch on YouTube"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[a.description&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About this video"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed whitespace-pre-line",children:a.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Video Preview"}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(a.url,"_blank"),children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Open in YouTube"]})]}),e.jsx("div",{className:"w-full aspect-video border-2 border-border rounded-lg overflow-hidden bg-background",children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${a.id}`,className:"w-full h-full",title:a.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]})]})})]}):s?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-border bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs(r,{variant:"ghost",onClick:()=>o("/guides"),className:"mb-4",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Back to Guides"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(E,{className:"h-6 w-6 text-primary"}),e.jsx(x,{variant:"secondary",children:"Article"})]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.title}),e.jsxs("p",{className:"text-lg text-muted-foreground",children:["by ",s.user.name," (@",s.user.username,")"]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-[300px,1fr] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[s.coverImage&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full rounded-lg shadow-xl"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground mb-1 flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Reading Time"]}),e.jsxs("p",{className:"text-base",children:[s.readingTimeMinutes," minutes"]})]}),s.publishedAt&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground mb-1 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Published"]}),e.jsx("p",{className:"text-base",children:b(s.publishedAt)})]}),s.tags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((l,t)=>e.jsxs(x,{variant:"secondary",children:["#",l]},t))})]}),e.jsxs(r,{className:"w-full",onClick:()=>window.open(s.url,"_blank"),children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Read on Dev.to"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[s.description&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About this article"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Article Preview"}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(s.url,"_blank"),children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]})]}),e.jsxs("div",{className:"w-full max-h-[800px] border-2 border-border rounded-lg overflow-auto bg-background",children:[n&&e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Loading article preview..."}),!n&&c&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center px-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:c}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(s.url,"_blank"),children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Open on Dev.to"]})]}),!n&&!c&&m&&e.jsx("article",{className:"p-6 text-sm leading-relaxed space-y-4",children:e.jsx("div",{className:"space-y-4",dangerouslySetInnerHTML:{__html:m}})}),!n&&!c&&!m&&e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground text-sm px-4 text-center",children:"Preview not available for this article. Please open it on Dev.to."})]})]})]})]})})]}):null}export{H as default};
