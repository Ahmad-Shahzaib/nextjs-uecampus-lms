import{i as zt,a3 as k,a4 as J,a5 as De,a6 as Q,a7 as at,a8 as Vt,a9 as $t,r as _,j as r,aa as z,ab as Ne,ac as se,ad as Kt,ae as Gt,af as $e,ag as Zt,ah as qt,ai as S,aj as yt,t as Fe,ak as rt,al as pt,K as xt,a as Jt,u as Qt,d as B,c as I,B as H,I as he,C as st,e as ot,f as it,b as lt,m as Xt,M as en,Y as tn}from"./index-BgzuCSKe.js";import{L as $}from"./label-CTTYbNyV.js";import{D as We,d as dt,a as Te,b as Le,c as Ie,e as nn}from"./dialog-AKCUCdMT.js";import{S as ye,a as pe,b as xe,c as ge,d as be}from"./select-DWk-BBhH.js";import{I as an}from"./FileViewer-DnCe4usd.js";import{U as rn}from"./upload-_QSc8TW1.js";import{P as sn}from"./plus-Bn2ZrHCv.js";import{T as ct}from"./trash-2-nf0tJxYl.js";import"./index-BZrFsnjO.js";import"./download-BdUvxDmi.js";import"./external-link-c6h32n81.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=zt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);function O(e,n){const t=k(e);return isNaN(n)?J(e,NaN):(n&&t.setDate(t.getDate()+n),t)}function T(e,n){const t=k(e);if(isNaN(n))return J(e,NaN);if(!n)return t;const a=t.getDate(),s=J(e,t.getTime());s.setMonth(t.getMonth()+n+1,0);const o=s.getDate();return a>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),a),t)}function ze(e,n){const t=n*7;return O(e,t)}function ln(e,n){return T(e,n*12)}function dn(e){let n;return e.forEach(function(t){const a=k(t);(n===void 0||n<a||isNaN(Number(a)))&&(n=a)}),n||new Date(NaN)}function cn(e){let n;return e.forEach(t=>{const a=k(t);(!n||n>a||isNaN(+a))&&(n=a)}),n||new Date(NaN)}function P(e,n){const t=De(e),a=De(n);return+t==+a}function un(e,n,t){const a=Q(e,t),s=Q(n,t),o=+a-at(a),i=+s-at(s);return Math.round((o-i)/Vt)}function fn(e,n){const t=k(e.start),a=k(e.end);let s=+t>+a;const o=s?+t:+a,i=s?a:t;i.setHours(0,0,0,0);let l=1;const c=[];for(;+i<=o;)c.push(k(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return s?c.reverse():c}function E(e){const n=k(e);return n.setDate(1),n.setHours(0,0,0,0),n}function we(e,n){var l,c,d,u;const t=$t(),a=(n==null?void 0:n.weekStartsOn)??((c=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=k(e),o=s.getDay(),i=(o<a?-7:0)+6-(o-a);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function gt(e){return we(e,{weekStartsOn:1})}function vn(e){const n=k(e),t=n.getFullYear(),a=n.getMonth(),s=J(e,0);return s.setFullYear(t,a+1,0),s.setHours(0,0,0,0),s.getDate()}function mn(e){return Math.trunc(+k(e)/1e3)}function hn(e){const n=k(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(0,0,0,0),n}function yn(e,n){return un(hn(e),E(e),n)+1}function Ve(e,n){const t=k(e),a=k(n);return t.getTime()>a.getTime()}function bt(e,n){const t=k(e),a=k(n);return+t<+a}function Ke(e,n){const t=k(e),a=k(n);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function pn(e,n){const t=k(e),a=k(n);return t.getFullYear()===a.getFullYear()}function Re(e,n){return O(e,-n)}function Ye(e,n){const t=k(e),a=t.getFullYear(),s=t.getDate(),o=J(e,0);o.setFullYear(a,n,15),o.setHours(0,0,0,0);const i=vn(o);return t.setMonth(n,Math.min(s,i)),t}function ut(e,n){const t=k(e);return isNaN(+t)?J(e,NaN):(t.setFullYear(n),t)}function xn(e,n){return T(e,-n)}var x=function(){return x=Object.assign||function(n){for(var t,a=1,s=arguments.length;a<s;a++){t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},x.apply(this,arguments)};function gn(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(t[a[s]]=e[a[s]]);return t}function _t(e,n,t){for(var a=0,s=n.length,o;a<s;a++)(o||!(a in n))&&(o||(o=Array.prototype.slice.call(n,0,a)),o[a]=n[a]);return e.concat(o||Array.prototype.slice.call(n))}function oe(e){return e.mode==="multiple"}function ie(e){return e.mode==="range"}function Me(e){return e.mode==="single"}var bn={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function _n(e,n){return S(e,"LLLL y",n)}function Dn(e,n){return S(e,"d",n)}function jn(e,n){return S(e,"LLLL",n)}function Nn(e){return"".concat(e)}function wn(e,n){return S(e,"cccccc",n)}function Mn(e,n){return S(e,"yyyy",n)}var Cn=Object.freeze({__proto__:null,formatCaption:_n,formatDay:Dn,formatMonthCaption:jn,formatWeekNumber:Nn,formatWeekdayName:wn,formatYearCaption:Mn}),kn=function(e,n,t){return S(e,"do MMMM (EEEE)",t)},Sn=function(){return"Month: "},Pn=function(){return"Go to next month"},On=function(){return"Go to previous month"},En=function(e,n){return S(e,"cccc",n)},Fn=function(e){return"Week n. ".concat(e)},Wn=function(){return"Year: "},Tn=Object.freeze({__proto__:null,labelDay:kn,labelMonthDropdown:Sn,labelNext:Pn,labelPrevious:On,labelWeekNumber:Fn,labelWeekday:En,labelYearDropdown:Wn});function Ln(){var e="buttons",n=bn,t=Kt,a={},s={},o=1,i={},l=new Date;return{captionLayout:e,classNames:n,formatters:Cn,labels:Tn,locale:t,modifiersClassNames:a,modifiers:s,numberOfMonths:o,styles:i,today:l,mode:"default"}}function In(e){var n=e.fromYear,t=e.toYear,a=e.fromMonth,s=e.toMonth,o=e.fromDate,i=e.toDate;return a?o=E(a):n&&(o=new Date(n,0,1)),s?i=Ne(s):t&&(i=new Date(t,11,31)),{fromDate:o?De(o):void 0,toDate:i?De(i):void 0}}var Dt=_.createContext(void 0);function Rn(e){var n,t=e.initialProps,a=Ln(),s=In(t),o=s.fromDate,i=s.toDate,l=(n=t.captionLayout)!==null&&n!==void 0?n:a.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Me(t)||oe(t)||ie(t))&&(c=t.onSelect);var d=x(x(x({},a),t),{captionLayout:l,classNames:x(x({},a.classNames),t.classNames),components:x({},t.components),formatters:x(x({},a.formatters),t.formatters),fromDate:o,labels:x(x({},a.labels),t.labels),mode:t.mode||a.mode,modifiers:x(x({},a.modifiers),t.modifiers),modifiersClassNames:x(x({},a.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:x(x({},a.styles),t.styles),toDate:i});return r.jsx(Dt.Provider,{value:d,children:e.children})}function M(){var e=_.useContext(Dt);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function jt(e){var n=M(),t=n.locale,a=n.classNames,s=n.styles,o=n.formatters.formatCaption;return r.jsx("div",{className:a.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:t})})}function Yn(e){return r.jsx("svg",x({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Nt(e){var n,t,a=e.onChange,s=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=M(),u=(t=(n=d.components)===null||n===void 0?void 0:n.IconDropdown)!==null&&t!==void 0?t:Yn;return r.jsxs("div",{className:l,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:a,children:o}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function Bn(e){var n,t=M(),a=t.fromDate,s=t.toDate,o=t.styles,i=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,d=t.components,u=t.labels.labelMonthDropdown;if(!a)return r.jsx(r.Fragment,{});if(!s)return r.jsx(r.Fragment,{});var v=[];if(pn(a,s))for(var y=E(a),p=a.getMonth();p<=s.getMonth();p++)v.push(Ye(y,p));else for(var y=E(new Date),p=0;p<=11;p++)v.push(Ye(y,p));var g=function(b){var j=Number(b.target.value),w=Ye(E(e.displayMonth),j);e.onChange(w)},D=(n=d==null?void 0:d.Dropdown)!==null&&n!==void 0?n:Nt;return r.jsx(D,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:v.map(function(b){return r.jsx("option",{value:b.getMonth(),children:l(b,{locale:i})},b.getMonth())})})}function An(e){var n,t=e.displayMonth,a=M(),s=a.fromDate,o=a.toDate,i=a.locale,l=a.styles,c=a.classNames,d=a.components,u=a.formatters.formatYearCaption,v=a.labels.labelYearDropdown,y=[];if(!s)return r.jsx(r.Fragment,{});if(!o)return r.jsx(r.Fragment,{});for(var p=s.getFullYear(),g=o.getFullYear(),D=p;D<=g;D++)y.push(ut(Gt(new Date),D));var b=function(w){var L=ut(E(t),Number(w.target.value));e.onChange(L)},j=(n=d==null?void 0:d.Dropdown)!==null&&n!==void 0?n:Nt;return r.jsx(j,{name:"years","aria-label":v(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:t.getFullYear(),caption:u(t,{locale:i}),children:y.map(function(w){return r.jsx("option",{value:w.getFullYear(),children:u(w,{locale:i})},w.getFullYear())})})}function Hn(e,n){var t=_.useState(e),a=t[0],s=t[1],o=n===void 0?a:n;return[o,s]}function Un(e){var n=e.month,t=e.defaultMonth,a=e.today,s=n||t||a||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&se(o,s)<0){var d=-1*(c-1);s=T(o,d)}return i&&se(s,i)<0&&(s=i),E(s)}function zn(){var e=M(),n=Un(e),t=Hn(n,e.month),a=t[0],s=t[1],o=function(i){var l;if(!e.disableNavigation){var c=E(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[a,o]}function Vn(e,n){for(var t=n.reverseMonths,a=n.numberOfMonths,s=E(e),o=E(T(s,a)),i=se(o,s),l=[],c=0;c<i;c++){var d=T(s,c);l.push(d)}return t&&(l=l.reverse()),l}function $n(e,n){if(!n.disableNavigation){var t=n.toDate,a=n.pagedNavigation,s=n.numberOfMonths,o=s===void 0?1:s,i=a?o:1,l=E(e);if(!t)return T(l,i);var c=se(t,e);if(!(c<o))return T(l,i)}}function Kn(e,n){if(!n.disableNavigation){var t=n.fromDate,a=n.pagedNavigation,s=n.numberOfMonths,o=s===void 0?1:s,i=a?o:1,l=E(e);if(!t)return T(l,-i);var c=se(l,t);if(!(c<=0))return T(l,-i)}}var wt=_.createContext(void 0);function Gn(e){var n=M(),t=zn(),a=t[0],s=t[1],o=Vn(a,n),i=$n(a,n),l=Kn(a,n),c=function(v){return o.some(function(y){return Ke(v,y)})},d=function(v,y){c(v)||(y&&bt(v,y)?s(T(v,1+n.numberOfMonths*-1)):s(v))},u={currentMonth:a,displayMonths:o,goToMonth:s,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return r.jsx(wt.Provider,{value:u,children:e.children})}function le(){var e=_.useContext(wt);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function ft(e){var n,t=M(),a=t.classNames,s=t.styles,o=t.components,i=le().goToMonth,l=function(u){i(T(u,e.displayIndex?-e.displayIndex:0))},c=(n=o==null?void 0:o.CaptionLabel)!==null&&n!==void 0?n:jt,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:a.caption_dropdowns,style:s.caption_dropdowns,children:[r.jsx("div",{className:a.vhidden,children:d}),r.jsx(Bn,{onChange:l,displayMonth:e.displayMonth}),r.jsx(An,{onChange:l,displayMonth:e.displayMonth})]})}function Zn(e){return r.jsx("svg",x({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function qn(e){return r.jsx("svg",x({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var je=_.forwardRef(function(e,n){var t=M(),a=t.classNames,s=t.styles,o=[a.button_reset,a.button];e.className&&o.push(e.className);var i=o.join(" "),l=x(x({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),r.jsx("button",x({},e,{ref:n,type:"button",className:i,style:l}))});function Jn(e){var n,t,a=M(),s=a.dir,o=a.locale,i=a.classNames,l=a.styles,c=a.labels,d=c.labelPrevious,u=c.labelNext,v=a.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var y=d(e.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:o}),D=[i.nav_button,i.nav_button_next].join(" "),b=(n=v==null?void 0:v.IconRight)!==null&&n!==void 0?n:qn,j=(t=v==null?void 0:v.IconLeft)!==null&&t!==void 0?t:Zn;return r.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&r.jsx(je,{name:"previous-month","aria-label":y,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?r.jsx(b,{className:i.nav_icon,style:l.nav_icon}):r.jsx(j,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&r.jsx(je,{name:"next-month","aria-label":g,className:D,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?r.jsx(j,{className:i.nav_icon,style:l.nav_icon}):r.jsx(b,{className:i.nav_icon,style:l.nav_icon})})]})}function vt(e){var n=M().numberOfMonths,t=le(),a=t.previousMonth,s=t.nextMonth,o=t.goToMonth,i=t.displayMonths,l=i.findIndex(function(g){return Ke(e.displayMonth,g)}),c=l===0,d=l===i.length-1,u=n>1&&(c||!d),v=n>1&&(d||!c),y=function(){a&&o(a)},p=function(){s&&o(s)};return r.jsx(Jn,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:v,nextMonth:s,previousMonth:a,onPreviousClick:y,onNextClick:p})}function Qn(e){var n,t=M(),a=t.classNames,s=t.disableNavigation,o=t.styles,i=t.captionLayout,l=t.components,c=(n=l==null?void 0:l.CaptionLabel)!==null&&n!==void 0?n:jt,d;return s?d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=r.jsx(ft,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=r.jsxs(r.Fragment,{children:[r.jsx(ft,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(vt,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=r.jsxs(r.Fragment,{children:[r.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(vt,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:a.caption,style:o.caption,children:d})}function Xn(e){var n=M(),t=n.footer,a=n.styles,s=n.classNames.tfoot;return t?r.jsx("tfoot",{className:s,style:a.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:t})})}):r.jsx(r.Fragment,{})}function ea(e,n,t){for(var a=t?$e(new Date):Q(new Date,{locale:e,weekStartsOn:n}),s=[],o=0;o<7;o++){var i=O(a,o);s.push(i)}return s}function ta(){var e=M(),n=e.classNames,t=e.styles,a=e.showWeekNumber,s=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=ea(s,o,i);return r.jsxs("tr",{style:t.head_row,className:n.head_row,children:[a&&r.jsx("td",{style:t.head_cell,className:n.head_cell}),d.map(function(u,v){return r.jsx("th",{scope:"col",className:n.head_cell,style:t.head_cell,"aria-label":c(u,{locale:s}),children:l(u,{locale:s})},v)})]})}function na(){var e,n=M(),t=n.classNames,a=n.styles,s=n.components,o=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:ta;return r.jsx("thead",{style:a.head,className:t.head,children:r.jsx(o,{})})}function aa(e){var n=M(),t=n.locale,a=n.formatters.formatDay;return r.jsx(r.Fragment,{children:a(e.date,{locale:t})})}var Ge=_.createContext(void 0);function ra(e){if(!oe(e.initialProps)){var n={selected:void 0,modifiers:{disabled:[]}};return r.jsx(Ge.Provider,{value:n,children:e.children})}return r.jsx(sa,{initialProps:e.initialProps,children:e.children})}function sa(e){var n=e.initialProps,t=e.children,a=n.selected,s=n.min,o=n.max,i=function(d,u,v){var y,p;(y=n.onDayClick)===null||y===void 0||y.call(n,d,u,v);var g=!!(u.selected&&s&&(a==null?void 0:a.length)===s);if(!g){var D=!!(!u.selected&&o&&(a==null?void 0:a.length)===o);if(!D){var b=a?_t([],a):[];if(u.selected){var j=b.findIndex(function(w){return P(d,w)});b.splice(j,1)}else b.push(d);(p=n.onSelect)===null||p===void 0||p.call(n,b,d,u,v)}}},l={disabled:[]};a&&l.disabled.push(function(d){var u=o&&a.length>o-1,v=a.some(function(y){return P(y,d)});return!!(u&&!v)});var c={selected:a,onDayClick:i,modifiers:l};return r.jsx(Ge.Provider,{value:c,children:t})}function Ze(){var e=_.useContext(Ge);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function oa(e,n){var t=n||{},a=t.from,s=t.to;return a&&s?P(s,e)&&P(a,e)?void 0:P(s,e)?{from:s,to:void 0}:P(a,e)?void 0:Ve(a,e)?{from:e,to:s}:{from:a,to:e}:s?Ve(e,s)?{from:s,to:e}:{from:e,to:s}:a?bt(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}var qe=_.createContext(void 0);function ia(e){if(!ie(e.initialProps)){var n={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return r.jsx(qe.Provider,{value:n,children:e.children})}return r.jsx(la,{initialProps:e.initialProps,children:e.children})}function la(e){var n=e.initialProps,t=e.children,a=n.selected,s=a||{},o=s.from,i=s.to,l=n.min,c=n.max,d=function(p,g,D){var b,j;(b=n.onDayClick)===null||b===void 0||b.call(n,p,g,D);var w=oa(p,a);(j=n.onSelect)===null||j===void 0||j.call(n,w,p,g,D)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],P(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:Re(o,l-1),before:O(o,l-1)}),o&&i&&u.disabled.push({after:o,before:O(o,l-1)}),!o&&i&&u.disabled.push({after:Re(i,l-1),before:O(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:O(o,-c+1)}),u.disabled.push({after:O(o,c-1)})),o&&i){var v=z(i,o)+1,y=c-v;u.disabled.push({before:Re(o,y)}),u.disabled.push({after:O(i,y)})}!o&&i&&(u.disabled.push({before:O(i,-c+1)}),u.disabled.push({after:O(i,c-1)}))}return r.jsx(qe.Provider,{value:{selected:a,onDayClick:d,modifiers:u},children:t})}function Je(){var e=_.useContext(qe);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function _e(e){return Array.isArray(e)?_t([],e):e!==void 0?[e]:[]}function da(e){var n={};return Object.entries(e).forEach(function(t){var a=t[0],s=t[1];n[a]=_e(s)}),n}var R;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(R||(R={}));var ca=R.Selected,U=R.Disabled,ua=R.Hidden,fa=R.Today,Be=R.RangeEnd,Ae=R.RangeMiddle,He=R.RangeStart,va=R.Outside;function ma(e,n,t){var a,s=(a={},a[ca]=_e(e.selected),a[U]=_e(e.disabled),a[ua]=_e(e.hidden),a[fa]=[e.today],a[Be]=[],a[Ae]=[],a[He]=[],a[va]=[],a);return e.fromDate&&s[U].push({before:e.fromDate}),e.toDate&&s[U].push({after:e.toDate}),oe(e)?s[U]=s[U].concat(n.modifiers[U]):ie(e)&&(s[U]=s[U].concat(t.modifiers[U]),s[He]=t.modifiers[He],s[Ae]=t.modifiers[Ae],s[Be]=t.modifiers[Be]),s}var Mt=_.createContext(void 0);function ha(e){var n=M(),t=Ze(),a=Je(),s=ma(n,t,a),o=da(n.modifiers),i=x(x({},s),o);return r.jsx(Mt.Provider,{value:i,children:e.children})}function Ct(){var e=_.useContext(Mt);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function ya(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function pa(e){return!!(e&&typeof e=="object"&&"from"in e)}function xa(e){return!!(e&&typeof e=="object"&&"after"in e)}function ga(e){return!!(e&&typeof e=="object"&&"before"in e)}function ba(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function _a(e,n){var t,a=n.from,s=n.to;if(a&&s){var o=z(s,a)<0;o&&(t=[s,a],a=t[0],s=t[1]);var i=z(e,a)>=0&&z(s,e)>=0;return i}return s?P(s,e):a?P(a,e):!1}function Da(e){return yt(e)}function ja(e){return Array.isArray(e)&&e.every(yt)}function Na(e,n){return n.some(function(t){if(typeof t=="boolean")return t;if(Da(t))return P(e,t);if(ja(t))return t.includes(e);if(pa(t))return _a(e,t);if(ba(t))return t.dayOfWeek.includes(e.getDay());if(ya(t)){var a=z(t.before,e),s=z(t.after,e),o=a>0,i=s<0,l=Ve(t.before,t.after);return l?i&&o:o||i}return xa(t)?z(e,t.after)>0:ga(t)?z(t.before,e)>0:typeof t=="function"?t(e):!1})}function Qe(e,n,t){var a=Object.keys(n).reduce(function(o,i){var l=n[i];return Na(e,l)&&o.push(i),o},[]),s={};return a.forEach(function(o){return s[o]=!0}),t&&!Ke(e,t)&&(s.outside=!0),s}function wa(e,n){for(var t=E(e[0]),a=Ne(e[e.length-1]),s,o,i=t;i<=a;){var l=Qe(i,n),c=!l.disabled&&!l.hidden;if(!c){i=O(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),s||(s=i),i=O(i,1)}return o||s}var Ma=365;function kt(e,n){var t=n.moveBy,a=n.direction,s=n.context,o=n.modifiers,i=n.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,d=s.fromDate,u=s.toDate,v=s.locale,y={day:O,week:ze,month:T,year:ln,startOfWeek:function(b){return s.ISOWeek?$e(b):Q(b,{locale:v,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?gt(b):we(b,{locale:v,weekStartsOn:c})}},p=y[t](e,a==="after"?1:-1);a==="before"&&d?p=dn([d,p]):a==="after"&&u&&(p=cn([u,p]));var g=!0;if(o){var D=Qe(p,o);g=!D.disabled&&!D.hidden}return g?p:l.count>Ma?l.lastFocused:kt(p,{moveBy:t,direction:a,context:s,modifiers:o,retry:x(x({},l),{count:l.count+1})})}var St=_.createContext(void 0);function Ca(e){var n=le(),t=Ct(),a=_.useState(),s=a[0],o=a[1],i=_.useState(),l=i[0],c=i[1],d=wa(n.displayMonths,t),u=s??(l&&n.isDateDisplayed(l))?l:d,v=function(){c(s),o(void 0)},y=function(b){o(b)},p=M(),g=function(b,j){if(s){var w=kt(s,{moveBy:b,direction:j,context:p,modifiers:t});P(s,w)||(n.goToDate(w,s),y(w))}},D={focusedDay:s,focusTarget:u,blur:v,focus:y,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return r.jsx(St.Provider,{value:D,children:e.children})}function Xe(){var e=_.useContext(St);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function ka(e,n){var t=Ct(),a=Qe(e,t,n);return a}var et=_.createContext(void 0);function Sa(e){if(!Me(e.initialProps)){var n={selected:void 0};return r.jsx(et.Provider,{value:n,children:e.children})}return r.jsx(Pa,{initialProps:e.initialProps,children:e.children})}function Pa(e){var n=e.initialProps,t=e.children,a=function(o,i,l){var c,d,u;if((c=n.onDayClick)===null||c===void 0||c.call(n,o,i,l),i.selected&&!n.required){(d=n.onSelect)===null||d===void 0||d.call(n,void 0,o,i,l);return}(u=n.onSelect)===null||u===void 0||u.call(n,o,o,i,l)},s={selected:n.selected,onDayClick:a};return r.jsx(et.Provider,{value:s,children:t})}function Pt(){var e=_.useContext(et);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Oa(e,n){var t=M(),a=Pt(),s=Ze(),o=Je(),i=Xe(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,v=i.blur,y=i.focus,p=i.focusMonthBefore,g=i.focusMonthAfter,D=i.focusYearBefore,b=i.focusYearAfter,j=i.focusStartOfWeek,w=i.focusEndOfWeek,L=function(m){var h,q,te,ne;Me(t)?(h=a.onDayClick)===null||h===void 0||h.call(a,e,n,m):oe(t)?(q=s.onDayClick)===null||q===void 0||q.call(s,e,n,m):ie(t)?(te=o.onDayClick)===null||te===void 0||te.call(o,e,n,m):(ne=t.onDayClick)===null||ne===void 0||ne.call(t,e,n,m)},G=function(m){var h;y(e),(h=t.onDayFocus)===null||h===void 0||h.call(t,e,n,m)},F=function(m){var h;v(),(h=t.onDayBlur)===null||h===void 0||h.call(t,e,n,m)},Y=function(m){var h;(h=t.onDayMouseEnter)===null||h===void 0||h.call(t,e,n,m)},Ce=function(m){var h;(h=t.onDayMouseLeave)===null||h===void 0||h.call(t,e,n,m)},de=function(m){var h;(h=t.onDayPointerEnter)===null||h===void 0||h.call(t,e,n,m)},X=function(m){var h;(h=t.onDayPointerLeave)===null||h===void 0||h.call(t,e,n,m)},ce=function(m){var h;(h=t.onDayTouchCancel)===null||h===void 0||h.call(t,e,n,m)},ue=function(m){var h;(h=t.onDayTouchEnd)===null||h===void 0||h.call(t,e,n,m)},fe=function(m){var h;(h=t.onDayTouchMove)===null||h===void 0||h.call(t,e,n,m)},ee=function(m){var h;(h=t.onDayTouchStart)===null||h===void 0||h.call(t,e,n,m)},ve=function(m){var h;(h=t.onDayKeyUp)===null||h===void 0||h.call(t,e,n,m)},Z=function(m){var h;switch(m.key){case"ArrowLeft":m.preventDefault(),m.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":m.preventDefault(),m.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":m.preventDefault(),m.stopPropagation(),d();break;case"ArrowUp":m.preventDefault(),m.stopPropagation(),u();break;case"PageUp":m.preventDefault(),m.stopPropagation(),m.shiftKey?D():p();break;case"PageDown":m.preventDefault(),m.stopPropagation(),m.shiftKey?b():g();break;case"Home":m.preventDefault(),m.stopPropagation(),j();break;case"End":m.preventDefault(),m.stopPropagation(),w();break}(h=t.onDayKeyDown)===null||h===void 0||h.call(t,e,n,m)},ke={onClick:L,onFocus:G,onBlur:F,onKeyDown:Z,onKeyUp:ve,onMouseEnter:Y,onMouseLeave:Ce,onPointerEnter:de,onPointerLeave:X,onTouchCancel:ce,onTouchEnd:ue,onTouchMove:fe,onTouchStart:ee};return ke}function Ea(){var e=M(),n=Pt(),t=Ze(),a=Je(),s=Me(e)?n.selected:oe(e)?t.selected:ie(e)?a.selected:void 0;return s}function Fa(e){return Object.values(R).includes(e)}function Wa(e,n){var t=[e.classNames.day];return Object.keys(n).forEach(function(a){var s=e.modifiersClassNames[a];if(s)t.push(s);else if(Fa(a)){var o=e.classNames["day_".concat(a)];o&&t.push(o)}}),t}function Ta(e,n){var t=x({},e.styles.day);return Object.keys(n).forEach(function(a){var s;t=x(x({},t),(s=e.modifiersStyles)===null||s===void 0?void 0:s[a])}),t}function La(e,n,t){var a,s,o,i=M(),l=Xe(),c=ka(e,n),d=Oa(e,c),u=Ea(),v=!!(i.onDayClick||i.mode!=="default");_.useEffect(function(){var Y;c.outside||l.focusedDay&&v&&P(l.focusedDay,e)&&((Y=t.current)===null||Y===void 0||Y.focus())},[l.focusedDay,e,t,v,c.outside]);var y=Wa(i,c).join(" "),p=Ta(i,c),g=!!(c.outside&&!i.showOutsideDays||c.hidden),D=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:aa,b=r.jsx(D,{date:e,displayMonth:n,activeModifiers:c}),j={style:p,className:y,children:b,role:"gridcell"},w=l.focusTarget&&P(l.focusTarget,e)&&!c.outside,L=l.focusedDay&&P(l.focusedDay,e),G=x(x(x({},j),(a={disabled:c.disabled,role:"gridcell"},a["aria-selected"]=c.selected,a.tabIndex=L||w?0:-1,a)),d),F={isButton:v,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:G,divProps:j};return F}function Ia(e){var n=_.useRef(null),t=La(e.date,e.displayMonth,n);return t.isHidden?r.jsx("div",{role:"gridcell"}):t.isButton?r.jsx(je,x({name:"day",ref:n},t.buttonProps)):r.jsx("div",x({},t.divProps))}function Ra(e){var n=e.number,t=e.dates,a=M(),s=a.onWeekNumberClick,o=a.styles,i=a.classNames,l=a.locale,c=a.labels.labelWeekNumber,d=a.formatters.formatWeekNumber,u=d(Number(n),{locale:l});if(!s)return r.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var v=c(Number(n),{locale:l}),y=function(p){s(n,t,p)};return r.jsx(je,{name:"week-number","aria-label":v,className:i.weeknumber,style:o.weeknumber,onClick:y,children:u})}function Ya(e){var n,t,a=M(),s=a.styles,o=a.classNames,i=a.showWeekNumber,l=a.components,c=(n=l==null?void 0:l.Day)!==null&&n!==void 0?n:Ia,d=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:Ra,u;return i&&(u=r.jsx("td",{className:o.cell,style:s.cell,children:r.jsx(d,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:o.row,style:s.row,children:[u,e.dates.map(function(v){return r.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:r.jsx(c,{displayMonth:e.displayMonth,date:v})},mn(v))})]})}function mt(e,n,t){for(var a=t!=null&&t.ISOWeek?gt(n):we(n,t),s=t!=null&&t.ISOWeek?$e(e):Q(e,t),o=z(a,s),i=[],l=0;l<=o;l++)i.push(O(s,l));var c=i.reduce(function(d,u){var v=t!=null&&t.ISOWeek?Zt(u):qt(u,t),y=d.find(function(p){return p.weekNumber===v});return y?(y.dates.push(u),d):(d.push({weekNumber:v,dates:[u]}),d)},[]);return c}function Ba(e,n){var t=mt(E(e),Ne(e),n);if(n!=null&&n.useFixedWeeks){var a=yn(e,n);if(a<6){var s=t[t.length-1],o=s.dates[s.dates.length-1],i=ze(o,6-a),l=mt(ze(o,1),i,n);t.push.apply(t,l)}}return t}function Aa(e){var n,t,a,s=M(),o=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,d=s.fixedWeeks,u=s.components,v=s.weekStartsOn,y=s.firstWeekContainsDate,p=s.ISOWeek,g=Ba(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:o,weekStartsOn:v,firstWeekContainsDate:y}),D=(n=u==null?void 0:u.Head)!==null&&n!==void 0?n:na,b=(t=u==null?void 0:u.Row)!==null&&t!==void 0?t:Ya,j=(a=u==null?void 0:u.Footer)!==null&&a!==void 0?a:Xn;return r.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(D,{}),r.jsx("tbody",{className:i.tbody,style:l.tbody,children:g.map(function(w){return r.jsx(b,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),r.jsx(j,{displayMonth:e.displayMonth})]})}function Ha(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Ua=Ha()?_.useLayoutEffect:_.useEffect,Ue=!1,za=0;function ht(){return"react-day-picker-".concat(++za)}function Va(e){var n,t=e??(Ue?ht():null),a=_.useState(t),s=a[0],o=a[1];return Ua(function(){s===null&&o(ht())},[]),_.useEffect(function(){Ue===!1&&(Ue=!0)},[]),(n=e??s)!==null&&n!==void 0?n:void 0}function $a(e){var n,t,a=M(),s=a.dir,o=a.classNames,i=a.styles,l=a.components,c=le().displayMonths,d=Va(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),u=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,v=[o.month],y=i.month,p=e.displayIndex===0,g=e.displayIndex===c.length-1,D=!p&&!g;s==="rtl"&&(n=[p,g],g=n[0],p=n[1]),p&&(v.push(o.caption_start),y=x(x({},y),i.caption_start)),g&&(v.push(o.caption_end),y=x(x({},y),i.caption_end)),D&&(v.push(o.caption_between),y=x(x({},y),i.caption_between));var b=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:Qn;return r.jsxs("div",{className:v.join(" "),style:y,children:[r.jsx(b,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(Aa,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function Ka(e){var n=M(),t=n.classNames,a=n.styles;return r.jsx("div",{className:t.months,style:a.months,children:e.children})}function Ga(e){var n,t,a=e.initialProps,s=M(),o=Xe(),i=le(),l=_.useState(!1),c=l[0],d=l[1];_.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var u=[s.classNames.root,s.className];s.numberOfMonths>1&&u.push(s.classNames.multiple_months),s.showWeekNumber&&u.push(s.classNames.with_weeknumber);var v=x(x({},s.styles.root),s.style),y=Object.keys(a).filter(function(g){return g.startsWith("data-")}).reduce(function(g,D){var b;return x(x({},g),(b={},b[D]=a[D],b))},{}),p=(t=(n=a.components)===null||n===void 0?void 0:n.Months)!==null&&t!==void 0?t:Ka;return r.jsx("div",x({className:u.join(" "),style:v,dir:s.dir,id:s.id,nonce:a.nonce,title:a.title,lang:a.lang},y,{children:r.jsx(p,{children:i.displayMonths.map(function(g,D){return r.jsx($a,{displayIndex:D,displayMonth:g},D)})})}))}function Za(e){var n=e.children,t=gn(e,["children"]);return r.jsx(Rn,{initialProps:t,children:r.jsx(Gn,{children:r.jsx(Sa,{initialProps:t,children:r.jsx(ra,{initialProps:t,children:r.jsx(ia,{initialProps:t,children:r.jsx(ha,{children:r.jsx(Ca,{children:n})})})})})})})}function qa(e){return r.jsx(Za,x({},e,{children:r.jsx(Ga,{initialProps:e})}))}function Ot({className:e,classNames:n,showOutsideDays:t=!0,...a}){return r.jsx(qa,{showOutsideDays:t,className:Fe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Fe(rt({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Fe(rt({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({...s})=>r.jsx(pt,{className:"h-4 w-4"}),IconRight:({...s})=>r.jsx(xt,{className:"h-4 w-4"})},...a})}Ot.displayName="Calendar";function lr(){const{user:e,isAdmin:n}=Jt(),t=Qt(),[a,s]=_.useState([]),[o,i]=_.useState(!1),[l,c]=_.useState(!1),[d,u]=_.useState(null),[v,y]=_.useState(""),[p,g]=_.useState([]),[D,b]=_.useState([]),[j,w]=_.useState(new Date),[L,G]=_.useState(new Date),[F,Y]=_.useState({course_id:"",end_time:"10:00",color:"#8B5CF6"}),[Ce,de]=_.useState(!1),[X,ce]=_.useState(""),[ue,fe]=_.useState(null),[ee,ve]=_.useState(""),[Z,ke]=_.useState([]),[m,h]=_.useState(null),[q,te]=_.useState("");_.useEffect(()=>{e&&(ne(),tt().then(()=>Se()),Pe())},[e]);const ne=async()=>{if(n)try{const f=await B("/users");g(f)}catch{g([])}},tt=async()=>{try{const f=await B("/courses");return b(f||[]),f||[]}catch{return b([]),[]}},Se=async()=>{if(e)try{const f=D.length?D:await tt(),N=new Map(f.map(C=>[C.id,C])),[W,V]=await Promise.all([B("/timetable"),B("/feed/upcoming")]),me=(W||[]).map(C=>({...C,type:"class"})),A=(V.assignments||[]).filter(C=>C.due_date||C.custom_deadline).map(C=>{const ae=C.custom_deadline||C.due_date,Ee=new Date(ae),re=new Date(Ee.getTime()+4*60*60*1e3),K=N.get(C.course);return{id:`assignment-${C.id}`,course_name:C.title,course_code:(K==null?void 0:K.code)||"",day_of_week:S(re,"EEEE"),start_time:S(re,"h:mm a"),end_time:"",color:"#ef4444",type:"assignment",due_date:ae,course_id:C.course,assignment_id:C.id}}),Oe=(V.quizzes||[]).filter(C=>C.due_date||C.custom_deadline).map(C=>{const ae=C.custom_deadline||C.due_date,Ee=new Date(ae),re=new Date(Ee.getTime()+4*60*60*1e3),K=N.get(C.course_id);return{id:`quiz-${C.id}`,course_name:C.title,course_code:(K==null?void 0:K.code)||"",day_of_week:S(re,"EEEE"),start_time:S(re,"h:mm a"),end_time:"",color:"#8b5cf6",type:"quiz",due_date:ae,course_id:C.course_id}});s([...me,...A,...Oe])}catch(f){console.error("Error loading timetable:",f)}},Et=async()=>{if(!e||!F.course_id||!j){I.error("Please fill in all required fields and select a date");return}const f=D.find(V=>V.id===F.course_id);if(!f)return;const N=S(j,"EEEE"),W=S(j,"HH:mm");try{await B("/timetable",{method:"POST",body:JSON.stringify({course_name:f.title,course_code:f.code,day_of_week:N,start_time:W,end_time:F.end_time,color:F.color})}),I.success("Activity added successfully"),i(!1),Y({course_id:"",end_time:"10:00",color:"#8B5CF6"}),y(""),w(new Date),Se()}catch(V){I.error(V.message||"Failed to add entry")}},Ft=async f=>{try{await B(`/timetable/${f}`,{method:"DELETE"}),I.success("Entry deleted"),Se()}catch(N){I.error(N.message||"Failed to delete entry")}},Wt=f=>a.filter(N=>{if(N.due_date)return P(new Date(N.due_date),f);if(N.day_of_week){const W=S(f,"EEEE");return N.day_of_week===W}return!1}),Tt=f=>{u(f),c(!0)},Lt=()=>{!d||!d.course_id||(t(`/courses/${d.course_id}`),c(!1))},Pe=async()=>{if(e)try{const f=await B("/documents");ke(f||[]),f&&f.length>0&&(h(f[0]),await nt(f[0].id))}catch(f){console.error("Error loading user documents:",f)}},nt=async f=>{try{const N=await B(`/documents/${f}/signed-url`);te(N.url)}catch(N){console.error("Error loading PDF URL:",N),I.error("Failed to load PDF")}},It=async()=>{if(!ue||!X||!ee){I.error("Please fill in all fields and select a PDF");return}try{const f=new FormData;f.append("file",ue),f.append("title",ee),f.append("user_id",X),await B("/documents",{method:"POST",body:f}),I.success("PDF uploaded successfully"),de(!1),fe(null),ve(""),ce(""),Pe()}catch(f){I.error(f.message||"Failed to upload PDF")}},Rt=async(f,N)=>{if(confirm("Delete this document?"))try{await B(`/documents/${f}`,{method:"DELETE"}),I.success("Document deleted"),Pe(),(m==null?void 0:m.id)===f&&h(null)}catch(W){I.error(W.message||"Failed to delete document")}},Yt=E(L),Bt=Ne(L),At=Q(Yt),Ht=we(Bt),Ut=fn({start:At,end:Ht});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Calendar"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your schedule and deadlines"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n&&r.jsxs(r.Fragment,{children:[r.jsxs(We,{open:Ce,onOpenChange:de,children:[r.jsx(dt,{asChild:!0,children:r.jsxs(H,{variant:"outline",className:"gap-2",children:[r.jsx(rn,{className:"h-4 w-4"}),"Upload PDF for User"]})}),r.jsxs(Te,{children:[r.jsxs(Le,{children:[r.jsx(Ie,{children:"Upload PDF for User"}),r.jsx(nn,{children:"Select a user and upload a PDF document that will be displayed below their calendar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Select User"}),r.jsxs(ye,{value:X,onValueChange:ce,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Choose a user"})}),r.jsx(ge,{children:p.map(f=>r.jsx(be,{value:f.id,children:f.full_name||f.email},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Document Title"}),r.jsx(he,{value:ee,onChange:f=>ve(f.target.value),placeholder:"e.g., Study Materials, Schedule"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"PDF File"}),r.jsx(he,{type:"file",accept:".pdf",onChange:f=>{var N;return fe(((N=f.target.files)==null?void 0:N[0])||null)}})]}),r.jsx(H,{onClick:It,className:"w-full",children:"Upload PDF"})]})]})]}),r.jsxs(We,{open:o,onOpenChange:i,children:[r.jsx(dt,{asChild:!0,children:r.jsxs(H,{className:"gap-2",children:[r.jsx(sn,{className:"h-4 w-4"}),"New Event"]})}),r.jsxs(Te,{className:"max-w-2xl",children:[r.jsx(Le,{children:r.jsx(Ie,{children:"Add Timetable Entry"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Select Student"}),r.jsxs(ye,{value:v,onValueChange:y,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Choose a student"})}),r.jsx(ge,{children:p.map(f=>r.jsx(be,{value:f.id,children:f.full_name||f.email},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Course"}),r.jsxs(ye,{value:F.course_id,onValueChange:f=>Y({...F,course_id:f}),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Select a course"})}),r.jsx(ge,{children:D.map(f=>r.jsxs(be,{value:f.id,children:[f.code," - ",f.title]},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Select Date & Time"}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Ot,{mode:"single",selected:j,onSelect:w,className:"rounded-md border"})}),j&&r.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Selected: ",S(j,"EEEE, MMMM d, yyyy HH:mm")]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"End Time"}),r.jsx(he,{type:"time",value:F.end_time,onChange:f=>Y({...F,end_time:f.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Color"}),r.jsx(he,{type:"color",value:F.color,onChange:f=>Y({...F,color:f.target.value})})]}),r.jsx(H,{onClick:Et,className:"w-full",children:"Add Entry"})]})]})]})]})})]}),r.jsxs(st,{children:[r.jsx(ot,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(H,{variant:"ghost",size:"sm",onClick:()=>G(xn(L,1)),children:r.jsx(pt,{className:"h-4 w-4"})}),r.jsx(it,{className:"text-2xl font-bold",children:S(L,"MMMM yyyy")}),r.jsx(H,{variant:"ghost",size:"sm",onClick:()=>G(T(L,1)),children:r.jsx(xt,{className:"h-4 w-4"})})]})}),r.jsx(lt,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"grid min-w-[700px] grid-cols-7 gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(f=>r.jsx("div",{className:"text-center font-semibold text-sm py-2 text-muted-foreground",children:f},f))})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"grid min-w-[700px] grid-cols-7 gap-2",children:Ut.map((f,N)=>{const W=Wt(f),V=f.getMonth()===L.getMonth(),me=P(f,new Date);return r.jsxs("div",{className:`min-h-[120px] p-2 border rounded-lg ${V?"bg-card":"bg-muted/30 text-muted-foreground"} ${me?"ring-2 ring-primary":""}`,children:[r.jsx("div",{className:`text-sm font-semibold mb-1 ${me?"text-primary":""}`,children:S(f,"d")}),r.jsxs("div",{className:"space-y-1",children:[W.slice(0,3).map(A=>r.jsxs("div",{className:"text-xs p-1 rounded flex items-start gap-1 hover:bg-muted/50 cursor-pointer group",onClick:()=>Tt(A),children:[r.jsx("div",{className:"w-2 h-2 rounded-full mt-0.5 flex-shrink-0",style:{backgroundColor:A.color}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r.jsx("span",{className:"truncate font-medium",children:A.course_name}),n&&A.type==="class"&&r.jsx(H,{size:"sm",variant:"ghost",onClick:Oe=>{Oe.stopPropagation(),Ft(A.id)},className:"h-4 w-4 p-0 opacity-0 group-hover:opacity-100",children:r.jsx(ct,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"text-[10px] text-muted-foreground",children:A.start_time})]})]},A.id)),W.length>3&&r.jsxs("div",{className:"text-xs text-primary font-medium pl-3",children:[W.length-3," more"]})]})]},N)})})})]})})]}),r.jsx(We,{open:l,onOpenChange:c,children:r.jsxs(Te,{className:"sm:max-w-md",children:[r.jsx(Le,{className:"flex flex-row items-start justify-between space-y-0 pb-4",children:r.jsxs(Ie,{className:"text-lg font-semibold",children:[d==null?void 0:d.course_name,(d==null?void 0:d.type)==="assignment"||(d==null?void 0:d.type)==="quiz"?" closes":""]})}),d&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(Xt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsx("span",{children:d.due_date?(()=>{const f=new Date(d.due_date),N=new Date(f.getTime()+4*60*60*1e3);return S(N,"EEEE, MMMM dd, yyyy h:mm a")})():`${d.day_of_week}, ${d.start_time}`})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(en,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsx("span",{className:"capitalize",children:d.type==="assignment"?"Assignment":d.type==="quiz"?"Quiz":"Course event"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(on,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsx("span",{className:"text-primary",children:d.course_code})]}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx(H,{variant:"link",className:"text-primary px-0",onClick:Lt,children:"Go to activity â†’"})})]})]})}),Z.length>0&&r.jsxs(st,{children:[r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(it,{className:"flex items-center gap-2",children:[r.jsx(tn,{className:"h-5 w-5"}),"My Documents"]}),Z.length>1&&r.jsxs(ye,{value:(m==null?void 0:m.id)||"",onValueChange:async f=>{const N=Z.find(W=>W.id===f);h(N),N&&await nt(N.id)},children:[r.jsx(pe,{className:"w-full sm:w-[250px]",children:r.jsx(xe,{placeholder:"Select document"})}),r.jsx(ge,{children:Z.map(f=>r.jsx(be,{value:f.id,children:f.title},f.id))})]})]})}),r.jsx(lt,{children:m&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:m.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Added ",S(new Date(m.created_at),"MMM d, yyyy")]})]}),n&&r.jsxs(H,{variant:"destructive",size:"sm",onClick:()=>Rt(m.id,m.file_path),children:[r.jsx(ct,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden bg-muted/20 h-[400px] sm:h-[600px]",children:q?r.jsx(an,{url:q}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading PDF..."})})})]})})]})]})}export{lr as default};
