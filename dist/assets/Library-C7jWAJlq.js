import{u as R,a as O,k as L,r as i,d as b,c as x,j as e,B as v,C as w,b as k,o as t,l as h,p as D,I as A}from"./index-BgzuCSKe.js";import{T as F,a as I,b as S,c as B}from"./tabs-DzQTwS6e.js";const P="Education learning academic study skills teaching";function G(){const T=R(),{user:u}=O();L();const[l,E]=i.useState(""),[n,d]=i.useState([]),[c,f]=i.useState(!1),[g,C]=i.useState([]),[o,j]=i.useState(!1);i.useEffect(()=>{u&&p()},[u]);const p=async()=>{try{j(!0);const s=await b("/library/search-books",{method:"POST",body:JSON.stringify({query:P,maxResults:12})});C(s.books||[])}catch(s){console.error("Error loading educational books:",s),x.error("Failed to load recommended books")}finally{j(!1)}},N=s=>{T(`/library/${s.id}`,{state:{book:s}})},y=async s=>{var r;if(!s.trim()){d([]);return}try{f(!0);const a=await b("/library/search-books",{method:"POST",body:JSON.stringify({query:s,maxResults:20})});d(a.books||[]),x.success(`Found ${((r=a.books)==null?void 0:r.length)||0} books`)}catch(a){console.error("Error searching books:",a),x.error("Failed to search books"),d([])}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"eLibrary"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Discover education-related books and resources"})]})}),e.jsxs(F,{defaultValue:"recommended",className:"w-full",children:[e.jsxs(I,{className:"grid w-full max-w-3xl grid-cols-2",children:[e.jsx(S,{value:"recommended",children:"Educational Picks"}),e.jsx(S,{value:"search",children:"Search Books"})]}),e.jsxs(B,{value:"recommended",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Education-focused books"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Curated resources for learners and educators"})]}),e.jsx(v,{variant:"outline",size:"sm",onClick:p,disabled:o,children:o?"Refreshing...":"Refresh"})]}),o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map(s=>{var r;return e.jsx(w,{className:"border-border/50 hover:shadow-lg transition-all hover:scale-105 duration-300 overflow-hidden cursor-pointer",onClick:()=>N(s),children:e.jsxs(k,{className:"p-0",children:[s.thumbnail?e.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none"}})}):e.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center",children:e.jsx(t,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),s.authors.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",s.authors[0]]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:(r=s.categories)==null?void 0:r.slice(0,2).map((a,m)=>e.jsx(h,{variant:"secondary",className:"text-xs",children:a},m))}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary pt-1",children:[e.jsx(t,{className:"h-3 w-3"}),e.jsx("span",{children:"View Details"})]})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No educational books available"})]})]}),e.jsxs(B,{value:"search",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-2xl",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search for educational books (e.g., 'Teaching', 'Research', 'Academic success')...",value:l,onChange:s=>E(s.target.value),onKeyDown:s=>s.key==="Enter"&&y(l),className:"pl-10"})]}),e.jsx(v,{onClick:()=>y(l),disabled:c||!l.trim(),children:c?"Searching...":"Search"})]}),c&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),!c&&n.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(s=>{var r;return e.jsx(w,{className:"border-border/50 hover:shadow-lg transition-shadow overflow-hidden cursor-pointer",onClick:()=>N(s),children:e.jsxs(k,{className:"p-0",children:[s.thumbnail?e.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none"}})}):e.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center",children:e.jsx(t,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),e.jsx(h,{variant:"outline",className:"text-xs shrink-0",children:s.source==="google"?"Google":"OpenLib"})]}),s.authors.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",s.authors.slice(0,2).join(", "),s.authors.length>2&&" et al."]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:(r=s.categories)==null?void 0:r.slice(0,2).map((a,m)=>e.jsx(h,{variant:"secondary",className:"text-xs",children:a},m))}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary pt-2",children:[e.jsx(t,{className:"h-3 w-3"}),e.jsx("span",{children:"View Details"})]})]})]})},s.id)})}),!c&&n.length===0&&l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No books found. Try a different search term."})]}),!c&&n.length===0&&!l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Search for educational books using Google Books and Open Library."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Try topics such as "Teaching", "Research", or "Academic success".'})]})]})]})]})}export{G as default};
